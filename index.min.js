!function(n){if("object"==typeof exports&&"undefined"!=typeof module)module.exports=n();else if("function"==typeof define&&define.amd)define([],n);else{var e;e="undefined"!=typeof window?window:"undefined"!=typeof global?global:"undefined"!=typeof self?self:this,e.midibus=n()}}(function(){return function n(e,t,i){function o(u,s){if(!t[u]){if(!e[u]){var f="function"==typeof require&&require;if(!s&&f)return f(u,!0);if(r)return r(u,!0);var c=new Error("Cannot find module '"+u+"'");throw c.code="MODULE_NOT_FOUND",c}var a=t[u]={exports:{}};e[u][0].call(a.exports,function(n){var t=e[u][1][n];return o(t?t:n)},a,a.exports,n,e,t,i)}return t[u].exports}for(var r="function"==typeof require&&require,u=0;u<i.length;u++)o(i[u]);return o}({1:[function(n,e,t){"use-strict";var i=n("./src/midi.js");e.exports=i},{"./src/midi.js":5}],2:[function(n,e,t){function i(){}i.prototype={on:function(n,e,t){var i=this.e||(this.e={});return(i[n]||(i[n]=[])).push({fn:e,ctx:t}),this},once:function(n,e,t){function i(){o.off(n,i),e.apply(t,arguments)}var o=this;return i._=e,this.on(n,i,t)},emit:function(n){var e=[].slice.call(arguments,1),t=((this.e||(this.e={}))[n]||[]).slice(),i=0,o=t.length;for(i;i<o;i++)t[i].fn.apply(t[i].ctx,e);return this},off:function(n,e){var t=this.e||(this.e={}),i=t[n],o=[];if(i&&e)for(var r=0,u=i.length;r<u;r++)i[r].fn!==e&&i[r].fn._!==e&&o.push(i[r]);return o.length?t[n]=o:delete t[n],this}},e.exports=i},{}],3:[function(n,e,t){"use strict";function i(n,e){function t(n){var e=n.data[0]>>4,t={channel:15&n.data[0],pitch:n.data[1],velocity:n.data[2]};8===e||9===e&&0===t.velocity?u.emit("noteOff",t):9===e?u.emit("noteOn",t):11===e&&u.emit("controllerChange",t)}function i(n,t){null!==e&&(r[n]&&(t.channel=r[n]+t.channel),e.send([t.channel,t.pitch,t.velocity]))}if(n="undefined"!=typeof n?n:null,e="undefined"!=typeof e?e:null,null===n&&null===e)return!1;var u=new o;return null!==n&&(n.onmidimessage=t),{send:i,on:u.on.bind(u),once:u.on.bind(u)}}var o=n("tiny-emitter"),r={noteOff:128,noteOn:144};e.exports=i},{"tiny-emitter":2}],4:[function(n,e,t){"use strict";function i(n,e,t){return{channel:n,pitch:e,velocity:t}}e.exports=i},{}],5:[function(n,e,t){"use strict";function i(n){n.inputs.forEach(function(n){d.push(n)}),n.outputs.forEach(function(n){p.push(n)}),a=!0,c.emit("ready")}function o(){console.error("No access to your midi devices.")}function r(n,e){return!(!l||!a)&&u(n,e)}var u=n("./bus.js"),s=n("./message.js"),f=n("tiny-emitter"),c=new f,a=!1,l=!!navigator.requestMIDIAccess,d=[],p=[];l&&navigator.requestMIDIAccess().then(i,o),e.exports={isSupported:l,inputs:d,outputs:p,bus:r,message:s,msg:s,on:c.on.bind(c),once:c.once.bind(c)}},{"./bus.js":3,"./message.js":4,"tiny-emitter":2}]},{},[1])(1)});
